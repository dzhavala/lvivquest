var styleArray = [  {    featureType: "all",    stylers: [      { saturation: -80 }    ]  },{    featureType: "road.arterial",    elementType: "geometry",    stylers: [      { hue: "#00ffee" },      { saturation: 50 }    ]  },{    featureType: "poi.business",    elementType: "labels",    stylers: [      { visibility: "off" }    ]  }];var markerRadiusOptions = {  strokeColor: '#005AFF',  strokeOpacity: 0.3,  strokeWeight: 1,  fillColor: '#005AFF',  fillOpacity: 0.05,  radius: 50};var Map = function(){  var map,    arrLocations,    infobox;      function setArrLocations (array) {    arrLocations = array;    convertLocationsToDecimals(arrLocations);  }  /* Convert location to decimal format */  function convertLocationsToDecimals (arrLocations) {    for (var i = 0; i < arrLocations.length; i++) {      var locationObj = arrLocations[i];      var parts = locationObj.coords.split(',');      locationObj.latLng = new google.maps.LatLng(parts[0], parts[1]);    }  }  function placeMarkers () {    /* Marker icon */    var image = new google.maps.MarkerImage(      'img/icon-light.png',      new google.maps.Size(24, 34),      new google.maps.Point(0,0),      new google.maps.Point(12, 34)    );              var hQimage = new google.maps.MarkerImage(      'img/icon-dark.png',      new google.maps.Size(24, 34),      new google.maps.Point(0,0),      new google.maps.Point(12, 34)    );    /* Generate markers for each location */    var locationObj;    for (var i = 0; i < arrLocations.length; i++) {      locationObj = arrLocations[i];      locationObj.marker = new google.maps.Marker({        position: locationObj.latLng,        map: map,        icon: locationObj.isMarked ? hQimage : image,        title: locationObj.name,        zIndex: 2      });      markerRadiusOptions = $.extend(markerRadiusOptions, {map:map, center: locationObj.latLng});      var markerCircle = new google.maps.Circle(markerRadiusOptions);      // Regenerate infobox popup then each marker is clicked      google.maps.event.addListener(locationObj.marker, 'click', (function(locationObj) {        return function() {          activateMarker(locationObj);        }      })(locationObj));    }  }  // Update infobox content, open it and center map on proper location  function activateMarker(locationObj) {    map.panTo(locationObj.latLng);    google.maps.event.trigger(map,"markerActivated", locationObj);  }  function initialize () {    // Set map options    var mapOptions = {      zoom:19,      center: new google.maps.LatLng(49.841954,24.031592), // Ратуша      mapTypeId: google.maps.MapTypeId.ROADMAP,      panControl: false,      mapTypeControl: false,      streetViewControl: false,      zoomControl: true,      scrollwheel: false,      styles: styleArray,      zoomControlOptions: {        style: google.maps.ZoomControlStyle.LARGE      }    };    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);    placeMarkers();    return map;  }  function showUserLocation(loc) {    var marker = new google.maps.Marker({      position: loc,      map: map,      title: 'This is your position'    });    map.panTo(marker.getPosition());  }  function measureUserDistance(p1, p2){    return google.maps.geometry.spherical.computeDistanceBetween (p1, p2);  }  return {    initialize:initialize,    setArrLocations:setArrLocations,    activateMarker:activateMarker,    showUserLocation: showUserLocation,    measureUserDistance: measureUserDistance  };}();